# Introduction

Handling errors is an important part of every API integration.

While errors can be frustrating, we aim to make them as easy as possible to fix by using the same error format on every API and by including as much detail as possible in the error response.

This space provides info about the technical details on how to handle errors in your application, as well as an overview of common errors and how to fix them.

> For errors that are specific to a single API, more info can be found in that API's documentation space.

## HTTP response format

Error responses from publiq APIs follow the [RFC7807](https://datatracker.ietf.org/doc/html/rfc7807) standard, also known as "Problem Details for HTTP APIs".

### Status code

Every error response uses a HTTP status code within the 400 or 500 range.

The most common status codes are:

*   `400` **Bad request**: The response body or another part of the request (not covered by other statuses) is malformed, invalid or unrecognized.
*   `401` **Unauthorized**: The request is missing the required authentication info, or the credentials that are used are invalid or expired. (See the [Authentication docs](https://publiq.stoplight.io/docs/authentication/docs/errors.md#unauthorized) for more info)
*   `403` **Forbidden**: The request is successfully authenticated, but you do not have permission to perform it on the given API or resource with the used credentials. (See the [Authentication docs](https://publiq.stoplight.io/docs/authentication/docs/errors.md#forbidden) for more info)
*   `404` **Not found**: The requested URL does not exist. Can either be because the endpoint does not exist, or a resource id or slug used in the path does not exist, or a query parameter is missing or invalid.

### Content-Type

Error responses use the `application/problem+json` content-type header from the [RFC7807](https://datatracker.ietf.org/doc/html/rfc7807) standard.

### Body

#### Standard properties

Error responses from publiq APIs always include at least the 3 following properties defined by the [RFC7807](https://datatracker.ietf.org/doc/html/rfc7807) standard:

*   `type` - A URL used to identify the problem. You can use this to differentiate between errors inside your application. Make sure to always compare the full URL and not just the last part, since some APIs might share similar yet different error types. In most cases this URL will link to human-readable documentation.
*   `title` - A short, human-readable summary of the problem type. Note that this is usually targetted towards developers, not end-users.
*   `status` - The HTTP status code generated by the origin server for this occurrence of the problem.

Sometimes the following optional properties are also included:

*   `detail` - A human-readable summary about this specific instance of the problem. Note that this is usually targetted towards developers, not end-users.

For example:

```json
{
  "type": "https://api.publiq.be/probs/uitpas/invalid-uitpasnumber",
  "title": "UiTPAS number invalid",
  "status": "400",
  "detail": "UiTPAS numbers must be exactly 13 digits."
}
```

#### Extensions

Aside from the standardized properties above, the RFC7807 spec also allows for custom properties. The following extra properties are sometimes used on publiq APIs to provide more information in specific situations.

##### schemaErrors

In the case of validation of JSON bodies in requests, error responses can include multiple validation errors at the same time in a `schemaErrors` property.

This property will contain a list with objects that have a `jsonPointer` that conforms to the [RFC6901](https://datatracker.ietf.org/doc/html/rfc6901) standard. This pointer indicates which specific JSON property inside the request body was invalid or caused a problem.

The objects also contain an `error` property with a human-readable (but often technical) explanation of why that specific part of the given JSON is invalid.

For example:

```json
{
  "type": "https://api.publiq.be/probs/body/invalid-data",
  "title": "Invalid body data",
  "status": "400",
  "schemaErrors": [
    {
      "jsonPointer": "/",
      "error": "Required property \"tariffId\" missing."
    },
    {
      "jsonPointer": "/numberOfTickets",
      "error": "The data (string) must match the type: integer"
    },
  ]
}
```
